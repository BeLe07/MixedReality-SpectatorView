<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Socketer Overview | MixedReality-SpectatorView Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Socketer Overview | MixedReality-SpectatorView Documentation ">
    <meta name="generator" content="docfx 2.47.0.0">
    
    <link rel="shortcut icon" href="../../../../../../doc/images/favicon.ico">
    <link rel="stylesheet" href="../../../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../../../../toc.html">
    
    <meta property="docfx:rel" content="../../../../../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../../../../index.html">
                <img id="logo" class="svg" src="../../../../../../doc/images/spectatorview-logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="socketer-overview">Socketer Overview</h1>

<p>There are a thousand libraries for using sockets on Windows.  The problem is that each one tends to support only one protocol, doesn't support UWP or <em>only</em> supports UWP, are still complex to use, and/or require very different coding patterns.  Supporting another protocol means a different library with a completely different usage convention.  There are also unfortunately a number of caveats when using sockets.  They mostly just work, until you find the situation where they just don't.  So, this is Yet Another Socket Library, that hopefully gives greater flexibility for those situations, and greater ease of use.  It is intended for fast projects, not production code.</p>
<h2 id="use-c">Use (C#)</h2>
<pre><code>// Listening
SocketerClient l = SocketerClient.CreateListener(protocol, port);
l.Start();
l.Message += Socketer_Message

// Sending
SocketerClient s = SocketerClient.CreateSender(protocol, host, port);
s.Start();
s.SendNetworkMessage(MessageType : uint, Message : string or byte[]);
</code></pre>
<h2 id="use-unity">Use (Unity)</h2>
<p>Add a Socketer component in the scene.  Add your consumer code as another component:</p>
<pre><code>  public class MyClass : MonoBehaviour
  {
      public Socketer Network;
      void Start()
      {
          Network.Message += Network_Message;
          Network.SendNetworkMessage(MessageType : uint, Message : string or byte[]);
      }
  }
</code></pre>
<h2 id="considerations">Considerations</h2>
<h3 id="the-first-choice-is-protocol--tcp-or-udp">The first choice is protocol:  TCP or UDP</h3>
<ul>
<li><strong>UDP:</strong> fast, simple, connectionless, unidirectional, no guaranteed ordering, no error checking, no way to know if your packets are arriving</li>
<li><strong>TCP:</strong> still pretty fast, connections (so you know if you're talking), bidirectional, guaranteed order of arrival and error checking</li>
</ul>
<h3 id="port--9999-12345-etc">Port:  (9999, 12345, etc)</h3>
<p>This is a number that you make up and (usually) hardcode to your app.  Choose one between 1024 and 65535, I recommend between 10000 and 40000 to reduce risk of collisions.  To see what's already being used on your machine, run &quot;netstat -an&quot; from a cmd window.</p>
<h3 id="host">Host</h3>
<p>This is usually the IP address (run &quot;ipconfig&quot; from a cmd window).  It's worth it to put some thought into who the &quot;server&quot; will be in your app and who the &quot;client&quot; will be.  The client needs to know the server's hostname, and will usually store it in a config file or accept it via a UI.  Socketer calls these &quot;sender&quot; for client and &quot;listener&quot; for server.  &quot;127.0.0.1&quot; means &quot;the same machine I'm on now&quot;.</p>
<h3 id="protocol-differences">Protocol differences</h3>
<p>For Socketer, you can use either protocol with nearly no difference.  However, there are some subtle behaviors:</p>
<ul>
<li>The connect and disconnect events only fire for TCP.</li>
<li>With TCP, both sender and listener can SendNetworkMessage.  With UDP, only sender can SendNetworkMessage.</li>
<li>Also with TCP, multiple senders can talk to one listener, and when the listener calls SendNetworkMessage all of the connected senders will receive it.</li>
<li>SendNetworkMessages that are made when the other side are unavailable are lost.  With UDP, there is no way to know if this happens.  With TCP, you may listen to the connection events.</li>
<li>All Socketer components automatically try to connect/send, and if the recipient is lost (eg, the other side closes their app) they will reconnect/resume.</li>
<li>Socketer automatically tries to make a TCP connection as soon as you call Start(), and continues to try until it succeeds.  This is convenient, but sometimes the attempts have a long timeout and this can cause it to take awhile to connect if the timing of when the host becomes available is unlucky.</li>
</ul>
<h3 id="special-cases">Special cases</h3>
<ul>
<li><strong>UWP loopback.</strong> If you need to talk to a UWP app that's running on your computer (this most often happens during development), localhost is blocked from receiving incoming connections.  It can initiate connections to another server that is NOT UWP.  This breaks UDP completely, and for TCP the UWP app must be the sender role. Once the connection is established, you can use the bidirectional nature of TCP to communciate back and forth.</li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Microsoft/MixedReality-SpectatorView/blob/master/src/SpectatorView.Unity/Assets/SpectatorView/Scripts/Socketer/README.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../../../styles/main.js"></script>
  </body>
</html>
